# SYNOPSIS:
#
#   make [all]  - makes everything.
#   make TARGET - makes the given target.
#   make clean  - removes all files generated by make.

# Points to the root of Google Test, relative to where this file is.
GTEST_DIR = ..

# Where to find user code.
USER_DIR = .

CXX = g++ 

# created to the list.
TESTS = uart_unittest

INCLUDES := -I../../include


#add by rocky
FILES = $(foreach d, $(USER_DIR), $(wildcard $(d)/*.cpp))
OBJS = $(patsubst %.cpp, %.o, $(FILES))

# House-keeping build targets.
#all : $(TESTS)
all : $(OBJS)

.PHONY:clean
clean:
	rm -f $(TESTS) gtest.a gtest_main.a *.o

%.o : %.cpp
	$(CXX) $(CPPFLAGS) $(INCLUDES)  $(CXXFLAGS) -c $< -o $@

$(TESTS) : $(OBJS) gtest_main.a
	$(CXX) $(CPPFLAGS) $(CXXFLAGS) $^ -o $@

